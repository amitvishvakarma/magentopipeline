<?php /** * CedCommerce * * NOTICE OF LICENSE * * This source file is subject to the End User License Agreement (EULA) * that is bundled with this package in the file LICENSE.txt. * It is also available through the world-wide-web at this URL: * https://cedcommerce.com/license-agreement.txt * * @category Ced * @package Ced_ConnectBase * @author CedCommerce Core Team <connect@cedcommerce.com > * @copyright Copyright CEDCOMMERCE (https://cedcommerce.com/) * @license https://cedcommerce.com/license-agreement.txt */ ?> <?php $disabled = ''; $categories = $block->getCategories(); $backArrow = $block->getViewFileUrl('Ced_ConnectBase::images/back_arrow.svg'); $rightAngle = $block->getViewFileUrl('Ced_ConnectBase::images/right_angle.svg'); $checkImage = $block->getViewFileUrl('Ced_ConnectBase::images/check.svg'); $savedTemplate = $block->getSavedTemplate(); $noData = $block->getViewFileUrl('Ced_ConnectBase::images/no_data.gif'); ?> <style> .dropdown { background-color: #ffffff; border: 0; border: 1px solid #BABFC3; border-radius: 4px; max-height: 200px; overflow: hidden; overflow: auto; position: relative; transition: height 500ms ease; width: 100%; margin-top: 1rem; } .menu-item { align-items: center; background-color: #ffffff; border-bottom: 1px solid #BABFC3; display: flex; justify-content: space-between; padding: 0.5rem; text-decoration: none; width: 100%; } .menu-item a { align-items: center; background-color: #ffffff; color: #202223; display: flex; justify-content: space-between; padding: 0.5rem; text-decoration: none; width: 100%; } .menu-item:hover { background-color: #F6F6F7; } *, *::before, *::after { box-sizing: border-box; } #browse-and-select-category { margin: 0; padding: 0.5rem; color: #202223; } .action-category-back { background: transparent; border-color: transparent; box-shadow: none; } .menu-item-root { background-color: #f1f1f1 !important; } .clearfix::after { content: ""; clear: both; display: table; } .ced-category-tree-main { border: #BABFC3 solid 0.1rem; padding: 1.5rem; } .ced-search-category { width: 100%; } .ced-search-category-tree { width: 100%; margin-bottom: 1rem; max-width: 100%; } .ced-category-tree-menu { margin: 0; } .no-data-found { font-size: 1.6rem; text-align: center; display: block; width: 100%; } .ced-category-notice { margin-top: 1rem; } .disabled { pointer-events: none; opacity: 0.5; cursor: not-allowed; }</style><div class="admin__field-label"><label for="ced-category-hierarchy"><span class="marketplace-categories-label">Marketplace Categories</span></label></div><?php if ($savedTemplate) { ?> <div class="admin__field-control"><input type="text" class="admin__control-text" id="ced-category-hierarchy" name="hierarchy" value="<?= /* @noEscape */ $savedTemplate->getHierarchy() ?>" data-form-part="template_form" readonly></div><?php } else { ?> <div id="cedCategoryTree" data-bind="scope: 'cedCategoryTree'" class="ced-category-tree-main admin__field-control"><div class="ced-search-category-tree clearfix data-grid-search-control-wrap"><input id="ced-search-category" autocomplete="off" class="ced-search-category" type="text" placeholder="Search by keyword" value=""><button id="ced-search-btn" class="ced-search-btn action-submit" aria-disabled="false" type="button"><span data-bind="i18n: 'Search'">Search</span></button></div><div class="dropdown"><ul class="ced-category-tree-menu"><li class="menu-item menu-item-root"><button id="category-back" type="button" title="Back" class="action-category-back" data-grand-parent-node="0" data-parent-node="0" style="display: none"><img src="<?= /* @noEscape */ $backArrow ?>" alt=""></button> <h2 class="select-category" id="browse-and-select-category">Browse and Select Category</h2></li> <?php if (!empty($categories)) { ?> <?php foreach ($categories as $category) { ?> <?php if (isset($category['category_status']) && $category['category_status'] == 0) { $disabled = 'disabled'; } ?> <li class="menu-item menu-item-child <?= /* @noEscape */ $disabled ?>" id="<?= /* @noEscape */ $category['category_id'] ?? $category['code'] ?? 0 ?>" data-is-parent="<?= /* @noEscape */ $category['parentNode'] ?? false ?>" data-category-name="<?= /* @noEscape */ $category['name'] ?? $category['category_path'] ?? '' ?>" data-category-id="<?= /* @noEscape */ $category['category_id'] ?? $category['code'] ?? 0 ?>"><a href="javascript:void(0)" id="anchor-id-<?= /* @noEscape */ $category['category_id'] ?? $category['code'] ?? 0 ?>"><span class="ced-category-name"><?= /* @noEscape */ $category['name'] ?? $category['category_path'] ?? '' ?></span> <div class="horizontal-stack"></div><?php if (isset($category['parentNode']) && $category['parentNode']) { ?> <img id="ced-child-categories-image" class="ced-child-categories-image" src="<?= /* @noEscape */ $rightAngle ?>" alt=""><?php } ?></a></li> <?php } ?> <?php } else { ?> <li class="menu-item menu-item-child"><span class="no-data-found" data-bind="i18n: 'No data found'"><?= /* @noEscape */ _('No data founds')?></span></li> <?php } ?></ul></div><div><input type="hidden" id="ced-category-hierarchy" name="hierarchy" value="" data-form-part="template_form"><input type="hidden" id="ced-category-id" name="category_id" value="" data-form-part="template_form"><input type="hidden" id="ced-account-id" name="account_id" value="<?= /* @noEscape */ $block->getCurrentAccountId(); ?>" data-form-part="template_form"></div><?= /* @noEscape */ $block->getCategoryNoticeHtml() ?></div><?php } ?> <script type="text/x-magento-init">
    {
        "#cedCategoryTree": {
            "Magento_Ui/js/core/app": {
                "components": {
                    "cedCategoryTree": {
                        "component": "Ced_ConnectBase/js/category/template/category-tree",
                        "childCategoriesUrl": "<?= /* @noEscape */$block->getChildCategoriesUrl();?>",
                        "searchCategoriesUrl": "<?= /* @noEscape */$block->getSearchCategoriesUrl();?>",
                        "rightImageUrl": "<?= /* @noEscape */ $rightAngle ?>",
                        "checkImageUrl": "<?= /* @noEscape */ $checkImage ?>",
                        "currentAccountId": "<?= /* @noEscape */$block->getCurrentAccountId();?>",
                        "currentMarketplaceId": "<?= /* @noEscape */$block->getCurrentMarketplaceId();?>"
                }
            }
        }
    }
}</script>